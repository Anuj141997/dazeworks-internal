<template>
  <lightning-card>

      <article class="slds-card">
          
          <div class="slds-card__header slds-grid">
              <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div>
                      <p id="standard">
                          <lightning-icon icon-name="standard:case" alternative-text="Task" title="Task"></lightning-icon>
                      </p>
                  </div> 
                <div class="slds-media__body slds-p-left_small">
                  <u><h1 style=font-size:20px class="slds-card__header-title">
                      <span>Action Items Tracker</span>
                  </h1></u>
                </div>
                <div class="slds-no-flex slds-p-horizontal_xx-small">
                  <lightning-button variant="Brand" label="Mark as Complete" title="Mark as Complete" onclick={updateTaskRowAction}> class="slds-m-right_small "></lightning-button>
                </div>
                <div class="slds-no-flex slds-p-horizontal_xx-small">
                <lightning-button variant="Brand" label="New" title="New" onclick={navigateToNewPage} class="slds-m-right_small "></lightning-button>
                 
                </div>
              </header>
            </div>
            <div class="slds-card__body"></div>
            <footer class="slds-card__footer"></footer>
      </article>
                      
      <lightning-datatable  data={data} 
                              columns={columns} 
                              key-field="Id"  
                              onrowselection={getSelectedIdAction} 
                              show-row-number-column="true"
                              onrowaction={handleRowAction} > 
      </lightning-datatable>
       
  </lightning-card>


  <template if:true={open}>
    <div class="demo-only" style="height: 640px;">
      <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
          <div class="slds-modal__container">
              <header class="slds-modal__header">
                  <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handleCancel}>
                      <lightning-icon icon-name="utility:close" size="medium">
                      </lightning-icon>
                      <span class="slds-assistive-text">Close</span>
                  </button>
                  <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Create New Action Item</h2>
              </header>
              <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                  
                      

                      <lightning-record-edit-form object-api-name='Case' onsuccess={handleSuccess} onerror={handleError} >
                        <div class="slds-grid slds-gutters">
                          <div class="slds-col slds-size_1-of-12">
                            <span></span>
                          </div>
                          <div class="slds-col slds-size_5-of-12">
                            <span>
                              <lightning-input-field field-name="Subject"></lightning-input-field>
                              <lightning-input-field field-name="Due_Date__c"></lightning-input-field>
                              <lightning-input-field field-name="Description"></lightning-input-field>
                              
                              <lightning-input-field field-name="Type"></lightning-input-field>
                            </span>
                          </div>
                          <div class="slds-col slds-size_5-of-12">
                            <span>
                              <lightning-input-field field-name="Assigned_To__c"></lightning-input-field>
                              <lightning-input-field field-name="ContactId"></lightning-input-field>
                              <lightning-input-field field-name="Steps_to_be_taken__c"></lightning-input-field>
                              
                            </span>
                          </div>
                          <div class="slds-col slds-size_1-of-12">
                            <span></span>
                          </div>
                        </div>
                        <br/><br/>
                      </lightning-record-edit-form>

                  
              </div>
              <footer class="slds-modal__footer">


                  <lightning-button label="Cancel" variant="neutral" onclick={handleCancel}></lightning-button>&nbsp;&nbsp;&nbsp;&nbsp;
                  <lightning-button type="submit" variant="brand" label="Save & New" onclick={saveAndNewClick}></lightning-button>
                  &nbsp;&nbsp;
                  <lightning-button label="Save" variant="brand" onclick={save}></lightning-button>
              </footer>
          </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
    </div>
  </template>
</template>